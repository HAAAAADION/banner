(function(c,b,a,d){c.fn.carousel=function(e){var h={auto:true,drag:true,mask:true,speed:50,};var g={lastPos:{x:0,y:0},length:c(this).length,size:c(this).parent().width(),Cubic:function(j,i,l,k){return l*((j=j/k-1)*j*j+1)+i},pause:"ontouchstart" in b,touchEvent:{eventDown:"touchstart",eventMove:"touchmove",eventUp:"touchend"},mouseEvent:{eventDown:"mousedown",eventMove:"mousemove",eventUp:"mouseup",eventEnter:"mouseenter",eventLeave:"mouseleave"},direction:{x1:0,x2:0},};g.eventAction=g.pause?g.touchEvent:g.mouseEvent;g.totalSize=g.size*g.length;var f=c.extend({},h,e,g);return new c.fn.carousel.prototype.init(this,f)};c.fn.carousel.prototype={init:function(e,f){this.$this=e;this.option=f;this.curPos=this.curDis=0;this.par=e.parent();this.pars=this.par.parent();this.sizeReset();if(this.option.mask){this.mask()}this.timeout();this.drag()},sizeReset:function(){var e=this;b.onresize=function(){e.option.size=e.par.width();e.option.totalSize=e.option.size*e.option.length;e.timoutGO(true)}},mask:function(){var e="";this.$this.each(function(g,f){e+=g==0?'<span class="on"></span>':"<span></span>"});this.pars.append('<div class="mask">'+e+"</div>")},maskChange:function(){var e=this.pars.find(".mask span");e.removeClass("on");e.eq(this.curPos).addClass("on")},fastDrag:function(){var e=this;this.dragnum+=1;this.fdt=setTimeout(function(){e.fastDrag()},10)},clearTime:function(){clearTimeout(this.t);clearTimeout(this.tt);clearTimeout(this.fdt)},timeout:function(){if(!this.option.auto){return false}var e=this;this.t=setTimeout(function(){e.timoutGO()},5000)},timoutGO:function(g){this.clearTime();var f=this.option.size;var e=-(this.$this.length-1)*f;this.curPos=this.curPos+1>this.$this.length-1&&!g?-1:this.curPos;this.curPos=g?this.curPos:++this.curPos;this.curDis=-(this.curPos*f);this.maskChange();this.anima(this.curDis);this.timeout()},drag:function(){if(!this.option.drag){return false}var h=this,f=this.option,g=f.lastPos,e=f.eventAction;h.$this.bind(e.eventDown,function(l){l.preventDefault();h.clearTime();h.dragReset();h.fastDrag();var k=f.pause?l.originalEvent.changedTouches[0]:l;var i={x:k.pageX};h.option.direction.x1=k.pageX;var j=h.par.css("transform").slice(7).split(", ");g.x=k.pageX-i.x+h.curDis+(j[4]-h.curDis);h.par.css("transform","translate3d("+g.x+"px, 0, 0)");c(a).bind(e.eventMove,function(n){n.preventDefault();h.jump=false;var m=f.pause?n.originalEvent.changedTouches[0]:n;g.x=m.pageX-i.x+h.curDis+(j[4]-h.curDis);h.par.css("transform","translate3d("+g.x+"px, 0, 0)")}).bind(e.eventUp,function(r){h.clearTime();var o=f.pause?r.originalEvent.changedTouches[0]:r,q=h.option.direction,n=q.x1<o.pageX?0:1,m=h.curPos;h.curPos=Math.round(-g.x/f.totalSize*f.length);if(m==h.curPos&&h.dragnum<15){h.curPos=q.x1-o.pageX>50&&n==1?++h.curPos:q.x1-o.pageX<-50&&n==0?--h.curPos:h.curPos}h.curPos=h.curPos<=0?0:h.curPos>=f.length-1?f.length-1:h.curPos;if(h.jump){location.href=h.$this.eq(h.curPos).attr("href")}h.maskChange();var p=-(h.curPos*f.size);h.anima(p);h.curDis=p;h.timeout();c(a).unbind()})})},dragReset:function(){this.jump=true;this.dragnum=0},anima:function(f){var h=parseFloat(this.par.css("transform").slice(7).split(", ")[4]);var e=h,j=f-h,i=this.option.speed,g=0;this.a2(e,j,i,g)},a2:function(f,j,i,g){var h=this;var e=Math.ceil(this.option.Cubic(g,f,j,i));this.par.css("transform","translate3d("+e+"px, 0, 0)");if(g<i){g++;this.tt=setTimeout(function(){h.a2(f,j,i,g)},10)}}};c.fn.carousel.prototype.init.prototype=c.fn.carousel.prototype})(jQuery,window,document);